#!/bin/bash

umask 077

INSTALL="/usr/local/games/minecraft"

echo "INFO: checking for $INSTALL/overviewer"
if [ ! -d $INSTALL/overviewer ]; then
    echo "INFO: creating $INSTALl/overviewer"
    cd $INSTALL

    git clone https://github.com/overviewer/Minecraft-Overviewer.git overviewer

    cd overviewer

    python setup.py build

    echo "INFO: verifying permissons"
    chown -R mcraft:mcraft $INSTALL/overviewer

else
    echo "INFO: $INSTALL/overviewer already exists"

fi

if [ ! -d $INSTALL/maps ]; then
    echo "INFO: setting up maps directory"

    mkdir -p $INSTALL/maps $INSTALL/maps/build $INSTALL/maps/www

    chown -R mcraft:mcraft $INSTALL/maps
fi

chmod 711 $INSTALL $INSTALL/maps $INSTALL/maps/www

